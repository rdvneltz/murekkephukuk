generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String   @unique
  password  String
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HeroSection {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  subtitle    String
  description String
  buttonText  String
  buttonLink  String
  backgroundImage String?
  videoUrl    String?
  logo        String?  @default("/assets/murekkep-logo-saydam.png")
  logoWidth   Int      @default(200)
  logoHeight  Int      @default(200)
  showButton  Boolean  @default(true)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Service {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  description String
  icon        String
  details     String
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model TeamMember {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  title       String
  bio         String
  image       String
  email       String?
  phone       String?
  linkedin    String?
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model AboutSection {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  content     String
  mission     String?
  vision      String?
  values      String[]
  image       String?
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ContactInfo {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  address     String
  phone       String
  email       String
  workingHours String
  mapUrl      String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Testimonial {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  title       String
  content     String
  rating      Int      @default(5)
  image       String?
  active      Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model BlogPost {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  slug        String   @unique
  content     String
  excerpt     String
  image       String?
  category    String
  tags        String[]
  published   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model SiteSettings {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  siteName    String
  siteTitle   String
  description String
  logo        String?
  favicon     String?
  primaryColor String  @default("#c19a6b")
  secondaryColor String @default("#243b53")
  footerText  String?
  socialMedia Json?
  sectionVisibility Json? // {hero: true, services: true, about: true, team: true, contact: true}
  copyrightText String? // Customizable copyright text
  legalLinks  Json?   // [{title: string, content: string, active: boolean, order: number}]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Appointment {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  name            String
  phone           String
  email           String?
  date            DateTime
  time            String
  meetingPlatform String   // whatsapp, telegram, zoom, site
  meetingLink     String?  // Generated Zoom/Telegram/Site meeting link
  status          String   @default("pending") // pending, approved, cancelled, completed
  notes           String?
  notificationSent Boolean @default(false) // Status change notification sent
  reminderSent    Boolean @default(false) // 30-min reminder sent
  previousDate    DateTime? // For tracking changes
  previousTime    String?   // For tracking changes
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model AvailableSlot {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  date        DateTime
  startTime   String
  endTime     String
  isBooked    Boolean  @default(false)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model HeroVideo {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  fileName    String
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
